name: Test FTP Connection

on:
  workflow_dispatch:

env:
  FTP_SERVER: 93.84.119.237
  FTP_USERNAME: ${{ secrets.FTP_USERNAME }}
  FTP_PASSWORD: ${{ secrets.FTP_PASSWORD }}

jobs:
  test-ftp:
    runs-on: ubuntu-latest
    
    steps:
    - name: ğŸš€ Test FTP Connection
      run: |
        echo "ğŸ” Testing FTP connection to ${{ env.FTP_SERVER }}"
        echo "ğŸ‘¤ Username: ${{ env.FTP_USERNAME }}"
        echo "ğŸ”‘ Password: [HIDDEN]"
        
        # Test basic connectivity
        echo "ğŸ” Testing port 21 (FTP)..."
        nc -zv ${{ env.FTP_SERVER }} 21 || echo "âŒ Port 21 not accessible"
        
        echo "ğŸ” Testing port 990 (FTPS)..."
        nc -zv ${{ env.FTP_SERVER }} 990 || echo "âŒ Port 990 not accessible"
        
        echo "ğŸ” Testing port 22 (SFTP)..."
        nc -zv ${{ env.FTP_SERVER }} 22 || echo "âŒ Port 22 not accessible"
        
        # Test with curl (basic FTP)
        echo "ğŸ” Testing FTP connection..."
        curl -v --ftp-port - ftp://${{ env.FTP_USERNAME }}:${{ env.FTP_PASSWORD }}@${{ env.FTP_SERVER }}/ || echo "âŒ FTP connection failed"
        
        # Test with curl (FTPS)
        echo "ğŸ” Testing FTPS connection..."
        curl -v --ftp-ssl ftps://${{ env.FTP_USERNAME }}:${{ env.FTP_PASSWORD }}@${{ env.FTP_SERVER }}/ || echo "âŒ FTPS connection failed"
        
        echo "âœ… Connection test completed"
